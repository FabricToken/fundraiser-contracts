#!/bin/bash

BASE_DIR=$(dirname $0)"/.."
CONTRACTS_DIR="${BASE_DIR}/contracts"

SEARCH_REPLACE_LIST=$(cat <<SETVAR
0x15c53A798C795265C8A5e84579FDd13E668Ce5E6  0x9E1Ef1eC212F5DFfB41d35d9E5c14054F26c6560
0xE3506B01Bee377829ee3CffD8bae650e990c5d68  0xce42bdB34189a93c55De250E011c68FaeE374Dd3
0x9071085064aE42973E1D4232baB7437952Ce1fF1  0x97A3FC5Ee46852C1Cf92A97B7BaD42F2622267cC

0x9FCca1d644C85EE00eAD611E61a87f8CE535615e  0xB9dcBf8A52Edc0C8DD9983fCc1d97b1F5d975Ed7
0x3eA2caac5A0A4a55f9e304AcD09b3CEe6cD4Bc39  0x26064a2E2b568D9A6D01B93D039D1da9Cf2A58CD
0xd5f791EC3ED79f79a401b12f7625E1a972382437  0xe84Da28128a48Dd5585d1aBB1ba67276FdD70776
0x2F54c78e0caa5240ed38fa7a5623Db47c2076F76  0xCc036143C68A7A9a41558Eae739B428eCDe5EF66
0xb6EA6193058F3c8A4A413d176891d173D62E00bE  0xE2b3204F29Ab45d5fd074Ff02aDE098FbC381D42
0x8b3E184Cf5C3bFDaB1C4D0F30713D30314FcfF7c  0x5D82c01e0476a0cE11C56b1711FeFf2d80CbB8B6

0xA6556B9BD0AAbf0d8824374A3C425d315b09b832  0x87c490ad2bE5447A61bdED4fac06fC3a2A7542b8
0x783A1cBc37a8ef2F368908490b72BfE801DA1877  0xeAD3fC31668c1Ea45efEc3De609DEC1ded72cF79
SETVAR
)

while read -r search replace;
do
    if [ -z "$search" -o -z "$replace" ]; then
        continue
    fi

    if [ -z "${OSTYPE##*darwin*}" ]; then
        sed -i '' "s/$search/$replace/" "${CONTRACTS_DIR}/FabricTokenSafe.sol";
        sed -i '' "s/$search/$replace/" "${CONTRACTS_DIR}/FabricTokenFundraiser.sol";
    else
        sed -i "s/$search/$replace/" "${CONTRACTS_DIR}/FabricTokenSafe.sol";
        sed -i "s/$search/$replace/" "${CONTRACTS_DIR}/FabricTokenFundraiser.sol";
    fi
done <<< "$SEARCH_REPLACE_LIST"

